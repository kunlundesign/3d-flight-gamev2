<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Flight Combat Game - Debug Version</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000;
            font-family: 'Arial', sans-serif;
        }
        
        #container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        #debug {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            z-index: 1000;
            font-size: 14px;
            border: 2px solid #00ff00;
            max-width: 300px;
        }
        
        #status {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.9);
            color: lime;
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
            font-family: monospace;
            border: 1px solid lime;
        }
        
        .error {
            color: red !important;
            border-color: red !important;
        }
        
        .success {
            color: lime !important;
            border-color: lime !important;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    
    <div id="debug">
        <h3>ğŸ® Flight Combat Game Debug</h3>
        <p><strong>ğŸ¯ æ­¦å™¨æ§åˆ¶:</strong></p>
        <p>ğŸ”« Left Click: æœºç¿¼æœºæª</p>
        <p>ğŸ’£ Spacebar: æŠ•æ·ç‚¸å¼¹</p>
        <p><strong>âœˆï¸ é£è¡Œæ§åˆ¶:</strong></p>
        <p>âŒ¨ï¸ WASD: ä¿¯ä»°åèˆª</p>
        <p>ğŸ–±ï¸ é¼ æ ‡: è§†è§’æ§åˆ¶</p>
        <p>âš¡ Shift/Ctrl: æ²¹é—¨</p>
        <hr>
        <p><strong>ğŸ¯ ç„å‡†ç³»ç»Ÿ:</strong></p>
        <p>ğŸ”´ çº¢è‰²åœ†åœˆ: æœºæªå‡†æ˜Ÿ</p>
        <p>ğŸŸ  æ©™è‰²åœ†åœˆ: æŠ•å¼¹ç„å‡†</p>
    </div>
    
    <div id="status">
        ğŸš€ Initializing...
    </div>

    <script type="module">
        const statusEl = document.getElementById('status');
        let scene, lastTime = 0;
        
        function updateStatus(message, isError = false) {
            statusEl.textContent = message;
            statusEl.className = isError ? 'error' : 'success';
            console.log(message);
        }
        
        async function initGame() {
            try {
                updateStatus('ğŸ“¦ Loading Three.js...');
                const THREE = await import('/node_modules/three/build/three.module.js');
                updateStatus(`âœ… Three.js ${THREE.REVISION} loaded`);
                
                updateStatus('ğŸ® Loading game scene...');
                const { PlayScene } = await import('./src/game/PlayScene.js');
                
                updateStatus('ğŸ—ï¸ Initializing scene...');
                scene = new PlayScene();
                await scene.init();
                
                updateStatus('ğŸ¯ Game ready! Click screen to start!');
                
                // å¼€å§‹æ¸¸æˆå¾ªç¯
                function animate(time) {
                    const deltaTime = (time - lastTime) * 0.001;
                    lastTime = time;
                    
                    if (scene) {
                        scene.update(deltaTime);
                        scene.render();
                    }
                    
                    requestAnimationFrame(animate);
                }
                
                animate(0);
                
                // æ·»åŠ é¢å¤–çš„è°ƒè¯•ä¿¡æ¯
                setTimeout(() => {
                    updateStatus('ğŸ® Game running! Look for crosshairs!');
                }, 2000);
                
            } catch (error) {
                console.error('âŒ Game initialization failed:', error);
                updateStatus(`âŒ Error: ${error.message}`, true);
                
                // æ˜¾ç¤ºè¯¦ç»†é”™è¯¯
                const debugEl = document.getElementById('debug');
                debugEl.innerHTML += `
                    <hr>
                    <h4 style="color: red;">âŒ Error Details:</h4>
                    <p style="color: red; font-size: 12px;">${error.message}</p>
                    <p style="color: orange; font-size: 11px;">Check browser console for more info</p>
                `;
            }
        }
        
        // ç­‰å¾…é¡µé¢åŠ è½½
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initGame);
        } else {
            initGame();
        }
    </script>
</body>
</html>
